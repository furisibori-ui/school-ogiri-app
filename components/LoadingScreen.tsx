'use client'

import { useEffect, useRef, useState } from 'react'
import { motion, AnimatePresence } from 'framer-motion'

// 準備の「最初」→「完成に近い」の順で表示（時間がかかっても自然な流れに）
const loadingMessages = [
  // 最初：認可・計画・人事
  '文部科学省に認可申請中...',
  '地域の情報を収集しています...',
  '職員会議で校名を投票中...',
  '校訓を3パターン検討中...',
  '校長を面接中...',
  '校歌を作詞作曲中...',
  '校歌の2番を書いてます...',
  '校則を制定中...',
  '校章をデザイン中...',
  'PTA会長を選出中...',
  '時間割を編成中...',
  '担任の先生を抽選中...',
  '部活動の顧問を配置中...',
  '地域の偉人を一名ピックアップ中...',
  '校史の年表を1887年から作成中...',
  // 中盤：設備・準備作業
  '校庭の草を刈っています...',
  '校舎の耐震工事を実施中...',
  '給食のメニューを考案中...',
  '生徒手帳を印刷中...',
  '校門のプレートを鋳造中...',
  '名簿をExcelで作ってます...',
  '校則の細則を第37条まで作成中...',
  '文化祭のテーマを募集中...',
  '修学旅行の行程を調整中...',
  '入学式の招待状を印刷中...',
  '体育館のステージを掃除中...',
  '黒板のチョークの粉を払ってます...',
  'マイクのテスト中... ポン、ポン',
  '教師が遅刻してます... お待ちください',
  '裏口入学を処理中...',
  'プールのカルキを抜いてます...',
  '図書室の本に蔵書印を押してます...',
  '保健室のベッドをセット中...',
  '給食室の大釜を磨いてます...',
  '職員室のコピー機を修理中...',
  '体育倉庫のボールに空気入れてます...',
  '掲示板の賞状を貼り直してます...',
  '校庭の白線を引き直してます...',
  'チャイムの音を選定中...',
  '週番の先生をローテーション中...',
  '地区懇談会の日程を調整中...',
  '防災訓練のシナリオを執筆中...',
  '卒業式のBGMを選曲中...',
  '新入生の名札を発注中...',
  '同窓会名簿を仮編集成中...',
  '校報の初号をレイアウト中...',
  '校庭の桜の本数を数えてます...',
  '正門の門扉を塗装中...',
  '校歌の楽譜を五線紙に清書中...',
  'PTA会報の原稿を催促中...',
  '文化祭のパンフを製本中...',
  '体育祭のプログラムを印刷中...',
  '三者面談の日程をGoogleカレンダーに投入中...',
  '卒業アルバムの写真を撮影中...',
  '非常ベルを点検中...（誤動作でした）',
  '蛍光灯を一本ずつ交換中...',
  '黒板消しをクリーニング中...',
  '教壇の高さを微調整中...',
  '廊下の掲示物の角を揃えてます...',
  'トイレのスリッパを補充中...',
  '自転車置き場のラインを引き直してます...',
  '校舎の外壁を点検中...',
  '屋上から見える景色を撮影中...',
  // 最後：仕上げ・最終確認（完成に近い）
  '校舎の写真をフォトスタジオで加工中...',
  '校則の文言を最終校正中...',
  '入学案内のパンフレットを製本中...',
  '通学路の安全確認中...',
  '避難経路の表示を設置中...',
  '職員の名札を発注中...',
  '教室のカーテンを洗濯中...',
  '理科室の実験器具を点検中...',
  '音楽室のピアノを調律中...',
  '家庭科室のミシンを整備中...',
  '技術室の工具を整頓中...',
  '視聴覚室のプロジェクターを設定中...',
  'パソコン室のネットワークを接続中...',
  '会議室の椅子を配置し直してます...',
  '校長室の応接セットを磨いてます...',
  '保健室の救急箱を補充中...',
  '給食の献立表を壁に貼ってます...',
  '下駄箱の番号札を付け替えてます...',
  '昇降口の靴を揃えてます...',
  '体育着のサイズを集計中...',
  '名札用の写真を撮影中...',
  'クラス旗のデザインを選考中...',
  '応援歌の歌詞を配布中...',
  '遠足のしおりを配布中...',
  '文化祭の役割を割り振り中...',
  '卒業証書の用紙を手配中...',
  '式典の来賓リストを確認中...',
  '校庭の砂場をならしてます...',
  '花壇の苗を植え替え中...',
  'プールの水温を計測中...',
  'グラウンドの排水溝を掃除中...',
  // 追加：この場所の学校準備・大喜利風（メタ・都道府県一覧系なし）
  '地域の名産を給食の first メニューに押し込み中...',
  '校門の表札の字を地域の書家に頼んでます...',
  '創立者の銅像のポーズを最終確認中...',
  '近所の商店街から寄贈されたのぼりを立ててます...',
  '校庭の土を地元の業者でならしてます...',
  '職員室のコーヒー豆を地域の焙煎屋で発注中...',
  '通学路の危険箇所を一枚の地図にまとめてます...',
  '校歌の2番の「この地」の部分を地名に差し替え中...',
  '体育館の床にワックスをかけ終わったところです...',
  '保健室の体重計の電池を交換中...',
  '図書室の開架を「地域コーナー」で埋めてます...',
  '校長の着任式の横断幕を業者に依頼中...',
  '生徒会の第一回選挙の公示を書いてます...',
  'プール開きの日を天気予報と照らし合わせ中...',
  '地域の古老から聞いた昔話を校史に追記中...',
  '校舎の裏の雑木林に「立入禁止」の札を打ってます...',
  '給食のアレルギー表を全献立で更新中...',
  '職員用の靴箱に名前シールを貼ってます...',
  '体育祭の紅白の色を地域の旗に合わせてます...',
  '文化祭のテーマを地域の歴史とすり合わせ中...',
  '修学旅行の下見報告を教頭が読み返してます...',
  '校則の「頭髪」の項を写真付きで作り直してます...',
  'PTAの初回役員会の会場を確保中...',
  '地域の消防団と避難訓練の日時を調整中...',
  '校庭の朝礼台のマイクのコードを延長中...',
  '理科室のガス栓を全部点検してます...',
  '音楽室の譜面台の数を数え直してます...',
  '家庭科室のコンロの火加減をチェック中...',
  '技術室ののこぎりを研いでます...',
  '校長室のソファのクリーニングを予約中...',
  '会議室のプロジェクターのリモコンを探してます...',
  '昇降口の傘立てを雨の日想定で並べてます...',
  '下駄箱の空きを新入生の人数で割り振り中...',
  '保健室のストレッチャーを廊下幅と照合中...',
  '給食室の配膳ワゴンの数をクラス数で割ってます...',
  '体育倉庫のマットの干し場を確保中...',
  '校庭のスプリンクラーの向きを微調整中...',
  '正門の門柱に校名プレートの下穴を開けてます...',
  '地域の農家から届いた野菜の検収をしてます...',
  '校舎の非常灯が全部点くか点検中...',
  '職員トイレの鍵を3本注文中...',
  '教室の窓の鍵が合うか一本ずつ試してます...',
  '廊下の消火器の期限を全部確認してます...',
  'グラウンドの夜間照明のタイマーをセット中...',
  '校歌の伴奏用CDを業者に発注中...',
  '入学式の保護者用椅子を体育館に並べてます...',
  '卒業式の花の手配を地元の花屋に依頼中...',
  '運動会のプログラムの順番を競技数で割ってます...',
  '文化祭の各クラスの出し物を一覧表にまとめてます...',
  '三者面談の時間割を保護者の希望で埋めてます...',
  '地域の神社の例大祭と体育祭が被らないか確認中...',
  '近所の公民館と会議室の貸し出し日を調整中...',
  'スクールバス停の位置を道路課と詰めてます...',
  '校庭のフェンスの補修箇所に赤テープを貼ってます...',
  '図書室の貸出システムをテスト運用中...',
  '給食の残渣率を昨年度と比較してます...',
  '保健室の救急箱の中身をリスト化してます...',
  '体育館の窓の鍵が合わないので業者を呼んでます...',
  '職員室のプリンターのトナーを替えてます...',
  '校長の名刺を地域の印刷屋に発注中...',
  '校章入りの封筒を在庫確認してます...',
  '生徒手帳の裏表紙に校訓を刷り込んでます...',
  '時間割の空きコマに「総合」を割り当て中...',
  '担任の自己紹介文を一枚にまとめてます...',
  '部活動の顧問一覧を廊下に貼る用にラミネート中...',
  '地域の偉人の肖像を講堂に飾るフレームを選んでます...',
  '校史の年表の誤字を一通り直してます...',
  '同窓会名簿の初版を印刷所に送ってます...',
  '校報の初号のトップ記事を校長に確認してもらってます...',
  '校庭の桜の剪定を業者に依頼中...',
  '正門の門扉の開閉がスムーズか試してます...',
  'PTA会報の表紙の写真を選んでます...',
  '文化祭のパンフの校正をしてます...',
  '体育祭のプログラムの裏に注意事項を追記中...',
  '卒業アルバムの表紙の色を委員会で決めてます...',
  '非常ベルの押し場所にシールを貼り直してます...',
  '蛍光灯の在庫を倉庫で数えてます...',
  '黒板消しの予備を各階のストックに補充中...',
  '教壇のマイクの電池を新品に替えてます...',
  '廊下の掲示板のピンが足りるか数えてます...',
  'トイレのスリッパのサイズ別在庫を補充中...',
  '自転車置き場の番号札を新年度用に刷り直してます...',
  '校舎の外壁のひび割れを業者に報告中...',
  '屋上の手すりの高さを規制と照合してます...',
  '校舎の写真をパンフ用にトリミングしてます...',
  '校則の「服装」の写真をモデル生徒で撮り直してます...',
  '入学案内の地図を実際の通学路と照合中...',
  '通学路の踏切の時間帯をメモしてます...',
  '避難経路の矢印が消えかけてる箇所を塗り直してます...',
  '職員の名札の字体を統一してます...',
  '教室のカーテンの色を全室で揃え直してます...',
  '理科室の薬品の在庫をリストに落としてます...',
  '音楽室のピアノの鍵盤の汚れを拭いてます...',
  '家庭科室の包丁の刃を研いでます...',
  '技術室の電動工具のコードを点検中...',
  '視聴覚室のスピーカーの左右バランスを確認中...',
  'パソコン室のマウスパッドを全席新品に替えてます...',
  '会議室のホワイトボードのマーカーを補充中...',
  '校長室の応接セットの位置を風水で微調整中...',
  '保健室の救急箱の薬の期限をチェックしてます...',
  '給食の献立表の誤字を一枚ずつ直してます...',
  '下駄箱の番号札が剥がれないか確認中...',
  '昇降口の靴の向きを揃えるよう案内を書いてます...',
  '体育着のサイズ別の在庫を業者に発注中...',
  '名札用の写真の背景を青一色に統一してます...',
  'クラス旗の候補を3案に絞ってます...',
  '応援歌の歌詞を印刷して全クラスに配る準備中...',
  '遠足のしおりの集合場所を地図で示してます...',
  '文化祭の役割をクラスごとの表に落としてます...',
  '卒業証書の用紙が届いたか業者に確認中...',
  '式典の来賓リストの敬称を統一してます...',
  '校庭の砂場の砂を業者で入れ替え予約中...',
  '花壇の苗を地域の園芸店で手配中...',
  'プールの水温計を校正してます...',
  'グラウンドの排水溝の蓋を全部開けて掃除してます...',
  '地域の方言を校歌の歌詞に一句だけ入れるか検討中...',
  '校門の植栽を地域の植木屋に頼んでます...',
  '創立者の肖像画の額縁を選んでます...',
  '近所の豆腐屋から給食の納品日を聞いてます...',
  '校庭の土のサンプルを業者に送ってます...',
  '職員室の冷蔵庫の霜取りをしてます...',
  '通学路の「こども110番」の家のリストを作ってます...',
  '校歌の1番の「朝日」を「夕日」に変えるか議論中...',
  '体育館のバスケのゴールの高さを測ってます...',
  '保健室の身長計の校正をしてます...',
  '図書室の「地域の本」コーナーの本を選んでます...',
  '校長の着任あいさつ文を下書きしてます...',
  '生徒会の選挙ポスターの貼り場所を確保中...',
  'プール開きのライフガードの手配をしてます...',
  '地域の古老の話をテープ起こししてます...',
  '校舎裏の立入禁止の理由を看板に短く書いてます...',
  '給食のアレルギー対応表を業者と突き合わせ中...',
  '職員の靴箱の番号を新年度の人事で振り直してます...',
  '体育祭の紅白の組み分けを抽選で決める準備中...',
  '文化祭のテーマをスローガンに縮めてます...',
  '修学旅行の部屋割りを男女・クラスで分けてます...',
  '校則の「服装」の写真を冬服・夏服で撮り直してます...',
  'PTAの初回会議のアジェンダを書いてます...',
  '消防団との避難訓練の想定火元を決めてます...',
  '朝礼台のマイクのフィードバックを抑える設定中...',
  '理科室のガス栓の安全キャップを全栓に付け直してます...',
  '音楽室の椅子の高さを平均身長で合わせてます...',
  '家庭科室のオーブンの予熱時間を計ってます...',
  '技術室の万力のネジが回るか点検してます...',
  '校長室のエアコンのリモコンを探してます...',
  '会議室の椅子の脚のキャップが取れてないか確認中...',
  '昇降口の傘立ての本数を雨の日想定で足してます...',
  '下駄箱の割り当て表を新入生名簿で作ってます...',
  '保健室のアイスパックを冷凍庫で冷やしてます...',
  '給食室の食器の数をクラス人数で割ってます...',
  '体育倉庫の跳び箱の段数を揃えてます...',
  '校庭のスプリンクラーのノズルを掃除してます...',
  '正門の校名プレートのネジを締め直してます...',
  '地域の農家の名前を給食の献立表に載せるか検討中...',
  '校舎の非常灯の電池を新品に替えてます...',
  '職員トイレの芳香剤を補充してます...',
  '教室の窓のストッパーが効くか点検してます...',
  '廊下の消火器の使い方を説明する紙を貼り直してます...',
  'グラウンドの夜間照明の照度を測ってます...',
  '校歌のCDの音量を体育館で試してます...',
  '入学式の保護者用パンフを折ってます...',
  '卒業式の花の色を校章に合わせてます...',
  '運動会のプログラムの表紙をデザインしてます...',
  '文化祭の出し物一覧を掲示用に大きく印刷してます...',
  '三者面談の時間の希望を保護者に取ってます...',
  '地域の神社の氏子さんに体育祭の日を伝えてます...',
  '公民館との会議室の予約を電話で確認中...',
  'スクールバス停の時刻表を業者と詰めてます...',
  '校庭のフェンスの補修を業者に見積もり依頼中...',
  '図書室の貸出カードの在庫を確認してます...',
  '給食の残渣を減らすキャンペーンの文言を考えてます...',
  '保健室の救急箱の鍵を職員室で管理するか検討中...',
  '体育館の窓の鍵を業者が来るまで仮の紐で縛ってます...',
  '職員室のプリンターの用紙を補充してます...',
  '校長の名刺の校名の表記を統一してます...',
  '校章入りの便箋を在庫してます...',
  '生徒手帳の校訓のページのレイアウトを直してます...',
  '時間割の「総合」の担当者を割り当て中...',
  '担任の自己紹介の写真を撮り直してます...',
  '部活動の顧問一覧の誤字を直してます...',
  '地域の偉人の生没年を校史と照合してます...',
  '校史の年表の西暦と和暦を両方書いてます...',
  '同窓会名簿の旧姓の扱いを決めてます...',
  '校報の初号の発行日を印刷所と合わせてます...',
  '校庭の桜の肥料を業者に相談してます...',
  '正門の門扉の鍵を3本用意してます...',
  'PTA会報の裏表紙に会員名簿を載せるか検討中...',
  '文化祭のパンフの裏に会場図を描いてます...',
  '体育祭のプログラムの余白に注意事項を詰め込んでます...',
  '卒業アルバムのクラスページの順番を決めてます...',
  '非常ベルの音が全館に聞こえるかテストしてます...',
  '蛍光灯の型番をメモして発注リストに追加してます...',
  '黒板消しのクリーニング業者を探してます...',
  '教壇のマイクのコードの長さを測ってます...',
  '廊下の掲示板のレイアウトを下書きしてます...',
  'トイレのスリッパの減り方を昨年と比較してます...',
  '自転車置き場の鍵の管理方法を決めてます...',
  '校舎の外壁の色を塗り直す業者を選んでます...',
  '屋上の手すりのさびを塗装で止めてます...',
  '校舎の写真の構図をパンフ用に crop してます...',
  '校則の「持ち物」のリストを今年度版に更新中...',
  '入学案内の「アクセス」のバス停名を実名で確認中...',
  '通学路の「危険箇所」を地図に赤で書き込んでます...',
  '避難経路の二次避難先を地域と確認中...',
  '職員の名札のクリップが壊れてないかチェックしてます...',
  '教室のカーテンの洗濯表示を確認してます...',
  '理科室の薬品の保管鍵を二重にしてます...',
  '音楽室のピアノの調律日を業者の予約表に書いてます...',
  '家庭科室のミシンの糸の色を補充してます...',
  '技術室ののこぎりの刃を研ぎ直してます...',
  '視聴覚室のスクリーンのシミを取る方法を調べてます...',
  'パソコン室のLANケーブルを全部抜き差ししてます...',
  '会議室のテーブルの脚を水平器で確認してます...',
  '校長室のソファの色を校章に合わせてます...',
  '保健室のベッドのシーツを洗濯してます...',
  '給食の献立表の栄養価を栄養士に計算してもらってます...',
  '下駄箱の番号の貼り位置を揃えてます...',
  '昇降口の「靴を揃えましょう」の張り紙を印刷してます...',
  '体育着のゼッケン番号をクラスで割り振ってます...',
  '名札用の写真の余白をトリミングしてます...',
  'クラス旗の投票用紙を印刷してます...',
  '応援歌の歌詞を拡大コピーして体育館に貼る準備中...',
  '遠足のしおりの「持ち物」を箇条書きで整理してます...',
  '文化祭の役割の空白を埋めるため再調整中...',
  '卒業証書の宛名を印刷するフォーマットを作ってます...',
  '式典の来賓の席次を案内図に落としてます...',
  '校庭の砂場の柵の高さを安全基準と照合してます...',
  '花壇の水やり当番を年間で割り振ってます...',
  'プールの塩素濃度の記録用紙を印刷してます...',
  'グラウンドのライン引きの道具を点検してます...',
]

// 振動の上下幅にズレを出す用（非対称）
const VIBRATION_AMPLITUDES = [
  [0, 2.5, -2, 0],
  [0, 2, -2.8, 0],
  [0, 3, -1.5, 0],
  [0, 1.8, -2.5, 0],
  [0, 2.2, -2.2, 0],
]

export default function LoadingScreen() {
  const [messageIndex, setMessageIndex] = useState(0)
  const [progress, setProgress] = useState(0)
  const [elapsed, setElapsed] = useState(0)
  const [isResting, setIsResting] = useState(false)
  const [yKeyframes, setYKeyframes] = useState(VIBRATION_AMPLITUDES[0])

  useEffect(() => {
    // メッセージを定期的に切り替え
    const messageInterval = setInterval(() => {
      setMessageIndex(prev => (prev + 1) % loadingMessages.length)
    }, 2500)

    // プログレスバーは実際の処理時間に合わせてゆっくり（嘘にならないように）
    const progressInterval = setInterval(() => {
      setProgress(prev => {
        if (prev >= 88) return prev
        return prev + Math.random() * 0.8 + 0.2
      })
    }, 2000)

    // 経過時間で振動をどんどん速くする用
    const elapsedInterval = setInterval(() => {
      setElapsed(e => e + 0.25)
      setYKeyframes(() => VIBRATION_AMPLITUDES[Math.floor(Math.random() * VIBRATION_AMPLITUDES.length)])
    }, 250)

    return () => {
      clearInterval(messageInterval)
      clearInterval(progressInterval)
      clearInterval(elapsedInterval)
    }
  }, [])

  // たまに疲れて止まる（ランダムで休憩）
  const restTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null)
  useEffect(() => {
    if (isResting) return
    const scheduleRest = () => {
      const delay = 8000 + Math.random() * 12000 // 8〜20秒ごとに判定
      restTimeoutRef.current = setTimeout(() => {
        if (Math.random() < 0.22) {
          setIsResting(true)
          const restDuration = 2000 + Math.random() * 1500 // 2〜3.5秒休憩
          setTimeout(() => setIsResting(false), restDuration)
        }
        scheduleRest()
      }, delay)
    }
    scheduleRest()
    return () => {
      if (restTimeoutRef.current) clearTimeout(restTimeoutRef.current)
    }
  }, [isResting])

  // 経過＋進捗で振動周期を短く（最後はマジで速く）
  const vibrationDuration = Math.max(0.012, 0.07 - (elapsed / 70) * 0.048 - (progress / 100) * 0.02)

  return (
    <div style={{
      position: 'fixed',
      inset: 0,
      background: 'linear-gradient(180deg, #0f1419 0%, #1a2332 50%, #0f1419 100%)',
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
      zIndex: 50
    }}>
      <div style={{ textAlign: 'center', padding: '0 1.5rem', maxWidth: '800px', width: '100%' }}>
        {/* 工事中イラスト（ドリル振動アニメ） */}
        <motion.div
          style={{
            marginBottom: '2rem',
            marginLeft: 'auto',
            marginRight: 'auto',
            width: '13rem',
            height: '13rem',
            background: '#fff',
            borderRadius: '50%',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            boxShadow: '0 0 32px rgba(0,0,0,0.25), 0 8px 24px rgba(0,0,0,0.2)',
            border: '4px solid rgba(0,0,0,0.08)'
          }}
        >
          <motion.img
            src="/loading-construction-worker.png"
            alt="工事中"
            style={{
              width: '9rem',
              height: 'auto',
              maxHeight: '10.5rem',
              objectFit: 'contain',
              display: 'block'
            }}
            animate={
              isResting
                ? { y: 0 }
                : { y: yKeyframes }
            }
            transition={
              isResting
                ? { duration: 0.3, ease: 'easeOut' }
                : {
                    duration: vibrationDuration,
                    repeat: Infinity,
                    ease: 'easeInOut'
                  }
            }
          />
        </motion.div>

        {/* タイトル */}
        <motion.h2
          style={{
            fontFamily: 'var(--font-yuji-mai), "HGS行書体", "AR行書体M", cursive',
            fontSize: '3rem',
            fontWeight: 'bold',
            color: '#d4af37',
            marginBottom: '1.5rem',
            textShadow: '0 4px 8px rgba(0,0,0,0.8)',
            letterSpacing: '0.15em'
          }}
          initial={{ opacity: 0, y: -20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.5 }}
        >
          学校建設中
        </motion.h2>
        <p style={{ fontSize: '0.9rem', color: 'rgba(240,230,210,0.8)', marginBottom: '1rem' }}>
          最大5分ほどお待ちいただく場合があります。そのままお待ちください。
        </p>

        {/* ローディングメッセージ */}
        <div style={{ 
          height: '4rem', 
          marginBottom: '2rem',
          backgroundColor: 'rgba(212,175,55,0.1)',
          border: '2px solid rgba(212,175,55,0.3)',
          borderRadius: '8px',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          padding: '1rem'
        }}>
          <AnimatePresence mode="wait">
            <motion.p
              key={messageIndex}
              style={{
                fontSize: '1.25rem',
                color: '#f0e6d2',
                fontFamily: '"Noto Serif JP", serif',
                letterSpacing: '0.05em'
              }}
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              exit={{ opacity: 0, y: -20 }}
              transition={{ duration: 0.5 }}
            >
              {loadingMessages[messageIndex]}
            </motion.p>
          </AnimatePresence>
        </div>

        {/* プログレスバー（幅固定でコメント文字量に左右されない） */}
        <div style={{ width: '100%', maxWidth: '400px', margin: '0 auto' }}>
          <div style={{ 
            width: '100%', 
            background: 'rgba(15,20,25,0.8)',
            borderRadius: '8px',
            height: '1.5rem',
            overflow: 'hidden',
            boxShadow: 'inset 0 2px 8px rgba(0,0,0,0.5)',
            border: '2px solid #8b7355'
          }}>
            <motion.div
              style={{
                height: '100%',
                background: 'linear-gradient(90deg, #d4af37 0%, #f4d03f 50%, #d4af37 100%)',
                boxShadow: '0 0 20px rgba(212,175,55,0.5)'
              }}
              initial={{ width: 0 }}
              animate={{ width: `${progress}%` }}
              transition={{ duration: 0.5 }}
            />
          </div>
          <p style={{
            color: '#d4af37',
            marginTop: '0.5rem',
            fontSize: '1rem',
            fontFamily: '"Noto Serif JP", serif',
            fontWeight: 'bold',
            letterSpacing: '0.1em',
            minHeight: '1.5em'
          }}>
            進捗率：{Math.round(progress)}%
          </p>
        </div>

        {/* ドット */}
        <div style={{ display: 'flex', justifyContent: 'center', marginTop: '2rem', gap: '0.5rem' }}>
          {[0, 1, 2].map((i) => (
            <motion.div
              key={i}
              style={{
                width: '0.75rem',
                height: '0.75rem',
                background: '#d4af37',
                borderRadius: '50%',
                boxShadow: '0 0 10px rgba(212,175,55,0.5)'
              }}
              animate={{
                scale: [1, 1.5, 1],
                opacity: [0.5, 1, 0.5],
              }}
              transition={{
                duration: 1.5,
                repeat: Infinity,
                delay: i * 0.2,
              }}
            />
          ))}
        </div>
      </div>
    </div>
  )
}
